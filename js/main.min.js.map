{"version":3,"sources":["main.js"],"names":["Site","mobileThreshold","init","_this","this","Globie","Language","fixWidows","$","window","resize","onResize","each","string","html","replace","$specific","$contentEn","$contentEs","bind","detectLang","click","$this","switchLang","data","lang","hide","show","userLang","navigator","language","userLanguage","indexOf","globie","Snap","lefteye","select","leftball","ellipse","attr","righteye","rightball","lenl","path","getTotalLength","lenr","bbl","getBBox","bbr","midl","x","width","y","height","midr","lpal","getPointAtLength","rpal","innerWidth","document","mousemove","e","moveEyes","pageX","pageY","DeviceOrientationEvent","addEventListener","onDeviceOrientationChange","event","gamma","beta","innerHeight","posX","posY","mX","offset","left","mY","top","tl","angle","tr","lpalx","lpaly","rpalx","rpaly","isPointInside","cx","cy","jQuery","ready"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global jQuery, $, document, Site, Globie, Snap */\n\nSite = {\n  mobileThreshold: 601,\n  init: function() {\n    var _this = this;\n\n    Globie.init();\n\n    _this.Language.init();\n    _this.fixWidows();\n\n    $(window).resize(function(){\n      _this.onResize();\n    });\n\n  },\n\n  onResize: function() {\n    var _this = this;\n\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n};\n\nSite.Language = {\n  init: function() {\n    var _this = this;\n\n    _this.$specific = $('.lang-specific');\n    _this.$contentEn = $('.active-en');\n    _this.$contentEs = $('.active-es');\n\n    _this.bind();\n\n    _this.detectLang();\n\n  },\n\n  bind: function() {\n    var _this = this;\n\n    $('.lang-switch').click(function() {\n      var $this = $(this);\n\n      _this.switchLang($this.data('lang'));\n\n    });\n\n  },\n\n  switchLang: function(lang) {\n    var _this = this;\n\n    _this.$specific.hide();\n\n    if (lang === 'es') {\n      _this.$contentEs.show();\n    } else {\n      _this.$contentEn.show();\n    }\n\n  },\n\n  detectLang: function() {\n    // Detect browser language\n     var userLang = navigator.language || navigator.userLanguage;\n\n     if ( userLang.indexOf('es') > -1 ) {\n       _this.switchLang('es');\n     }\n  },\n\n};\n\nGlobie = {\n  init: function() {\n    var _this = this;\n\n    // assign svg #globie as Snap object\n    var globie = Snap('#globie');\n    // select #leftEye from globie object\n    _this.lefteye = globie.select('#leftEye');\n    // draw left eyeball in globie object\n    _this.leftball = globie.ellipse(220, 150, 27, 40).attr({});\n    // select #rightEye from globie object\n    _this.righteye = globie.select('#rightEye');\n    // draw right eyeball in globie object\n    _this.rightball = globie.ellipse(280, 150, 27, 40).attr({});\n\n    // get length of left eye path\n    _this.lenl = Snap.path.getTotalLength(_this.lefteye);\n    // get length of right eye path\n    _this.lenr = Snap.path.getTotalLength(_this.lefteye);\n    // get bounding box of left eye path\n    _this.bbl = Snap.path.getBBox(_this.lefteye);\n    // get bounding box of right eye path\n    _this.bbr = Snap.path.getBBox(_this.righteye);\n\n    // find center point of left eye\n    _this.midl = {\n      x: _this.bbl.x + (_this.bbl.width / 2),\n      y: _this.bbl.y + (_this.bbl.height / 2),\n    };\n\n    // find center point of right eye\n    _this.midr = {\n      x: _this.bbr.x + (_this.bbr.width / 2),\n      y: _this.bbr.y + (_this.bbr.height / 2),\n    };\n\n    // Returns the (x,y) coordinate in user space which is distance units along the path\n    _this.lpal = Snap.path.getPointAtLength(_this.lefteye);\n    // Returns the (x,y) coordinate in user space which is distance units along the path\n    _this.rpal = Snap.path.getPointAtLength(_this.righteye);\n\n    _this.bind();\n\n  },\n\n  bind: function() {\n    var _this = this;\n\n    // mobile width check to be made does hover exist check\n    if ( window.innerWidth > 720 ) {\n      // Eyeballs follow cursor\n      $(document).mousemove(function (e) {\n        _this.moveEyes(e.pageX, e.pageY);\n      });\n    } else {\n      if(window.DeviceOrientationEvent){\n        window.addEventListener('deviceorientation', function(e) {\n          return _this.onDeviceOrientationChange(e);\n        }.bind(_this), false);\n      }\n    }\n\n  },\n\n  onDeviceOrientationChange: function(event) {\n    var _this = this;\n\n    var x = (event.gamma + 90) / 180 * window.innerWidth;\n    var y = (event.beta - 45 + 90) / 180 * window.innerHeight;\n\n    _this.moveEyes(x, y);\n\n  },\n\n  moveEyes: function(posX, posY) {\n    var _this = this;\n\n    var mX = posX - $('#globie').offset().left;\n    var mY = posY - $('#globie').offset().top;\n\n    var tl = Snap.angle(_this.midl.x, _this.midl.y, mX, mY) / 360;\n    var tr = Snap.angle(_this.midr.x, _this.midr.y, mX, mY) / 360;\n\n    var lpal = _this.lefteye.getPointAtLength((tl * _this.lenl) % _this.lenl);\n    var lpalx = lpal.x;\n    var lpaly = lpal.y;\n\n    var rpal = _this.righteye.getPointAtLength((tr * _this.lenr) % _this.lenr);\n    var rpalx = rpal.x;\n    var rpaly = rpal.y;\n\n    if (Snap.path.isPointInside(_this.lefteye, mX, mY)) {\n      _this.leftball.attr({\n        cx: mX,\n        cy: mY,\n      });\n    } else {\n      _this.leftball.attr({\n        cx: lpalx,\n        cy: lpaly,\n      });\n    }\n\n    if (Snap.path.isPointInside(_this.righteye, mX, mY)) {\n      _this.rightball.attr({\n        cx: mX,\n        cy: mY,\n      });\n    } else {\n      _this.rightball.attr({\n        cx: rpalx,\n        cy: rpaly,\n      });\n    }\n\n  },\n};\n\njQuery(document).ready(function () {\n  'use strict';\n\n  Site.init();\n\n});\n"]}